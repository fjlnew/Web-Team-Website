webpackJsonp([10],{apT3:function(e,t){},vKRX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"message",data:function(){return{deptData:[],majorData:[],insertInfo:{depart_num:"",major_num:"",email:"",phone_num:"",image:"",checkReserch:[],description:""},reserch:[],warnText:""}},props:{width:{type:Number,default:330},height:{type:Number,default:220}},computed:{major:function(){var e=this;return this.majorData.filter(function(t){return t.depart_num==e.insertInfo.depart_num})}},created:function(){var e=this;this.$http.get("/members/selectAllSearch").then(function(t){e.reserch=t.data.msg}),this.$http.get("/department/selectAlldata").then(function(t){e.deptData=t.data.msg}),this.$http.get("/major/selectAlldata").then(function(t){e.majorData=t.data.msg}),this.$http.get("/user/userInfo").then(function(t){var r=t.data.msg,n=t.data.reserch;e.insertInfo.depart_num=r[0].depart_num,e.insertInfo.major_num=r[0].major_num,e.insertInfo.phone_num=r[0].phone_num,e.insertInfo.image=r[0].image,e.insertInfo.description=r[0].description,e.insertInfo.email=r[0].email,e.insertInfo.checkReserch=n.map(function(e){return e.type_num})})},methods:{insertUserInfo:function(){var e=this;this.warnText="";""==this.insertInfo.email||""==this.insertInfo.telephone||0==this.insertInfo.checkReserch.length?this.warnText="邮箱、电话号码、研究方向不能为空！":/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(this.insertInfo.email)?/^1\d{10}$/.test(this.insertInfo.phone_num)?this.$refs.cropper.getHref()||""!=this.insertInfo.image?this.insertInfo.image?(console.log(this.insertInfo),this.$http.post("/user/completeusr",this.insertInfo).then(function(t){e.$router.push("/members")}).catch(function(t){e.warnText="出错了"})):this.$refs.cropper.getHref().then(function(t){e.insertInfo.image=t,e.$http.post("/user/completeusr",e.insertInfo).then(function(t){e.$router.push("/members")}).catch(function(t){e.warnText="出错了"})}):this.warnText="请上传照片！":this.warnText="电话号码格式不正确！":this.warnText="邮箱格式不正确！"}},components:{vueCropper:function(e){r.e(24).then(function(){var t=[r("13wZ")];e.apply(null,t)}.bind(this)).catch(r.oe)}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"message"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body bt-0"},[r("form",{staticClass:"mt-3",attrs:{onsubmit:"return false"}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"text-danger",attrs:{for:"depart"}},[e._v("学院")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.insertInfo.depart_num,expression:"insertInfo.depart_num"}],staticClass:"custom-select mt-2 form-control-lg",attrs:{required:"",id:"depart"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.insertInfo,"depart_num",t.target.multiple?r:r[0])}}},e._l(e.deptData,function(t,n){return r("option",{key:n,domProps:{value:t.depart_num}},[e._v("\n                              "+e._s(t.depart_name)+"\n                          ")])}))]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"text-danger",attrs:{for:"major"}},[e._v("专业")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.insertInfo.major_num,expression:"insertInfo.major_num"}],staticClass:"custom-select mt-2 form-control-lg",attrs:{required:"",id:"major"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.insertInfo,"major_num",t.target.multiple?r:r[0])}}},e._l(e.major,function(t,n){return r("option",{key:n,domProps:{value:t.major_num}},[e._v("\n                              "+e._s(t.major_name)+"\n                          ")])}))]),e._v(" "),r("div",{staticClass:"form-group has-error"},[r("label",{staticClass:"text-danger",attrs:{for:"email"}},[e._v("电子邮箱")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.insertInfo.email,expression:"insertInfo.email"}],staticClass:"form-control form-control-lg mt-2",attrs:{type:"email",id:"email","aria-describedby":"emailHelp",placeholder:"请输入您的电子邮箱",required:""},domProps:{value:e.insertInfo.email},on:{input:function(t){t.target.composing||e.$set(e.insertInfo,"email",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group has-error"},[r("label",{staticClass:"control-label text-danger",attrs:{for:"inputTel"}},[e._v("电话号码")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.insertInfo.phone_num,expression:"insertInfo.phone_num"}],staticClass:"form-control form-control-lg mt-2",attrs:{type:"text",id:"inputTel",placeholder:"手机号码","aria-describedby":"telHelp"},domProps:{value:e.insertInfo.phone_num},on:{input:function(t){t.target.composing||e.$set(e.insertInfo,"phone_num",t.target.value)}}}),e._v(" "),r("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v("We'll never share your telephoneNum with anyone else.")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label text-danger mb-2"},[e._v("研究方向")]),r("br"),e._v(" "),e._l(e.reserch,function(t,n){return r("div",{key:n,staticClass:"custom-control custom-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.insertInfo.checkReserch,expression:"insertInfo.checkReserch"}],staticClass:"custom-control-input",attrs:{id:n+1,type:"checkbox"},domProps:{value:t.reserch_num,checked:Array.isArray(e.insertInfo.checkReserch)?e._i(e.insertInfo.checkReserch,t.reserch_num)>-1:e.insertInfo.checkReserch},on:{change:function(r){var n=e.insertInfo.checkReserch,s=r.target,a=!!s.checked;if(Array.isArray(n)){var o=t.reserch_num,i=e._i(n,o);s.checked?i<0&&e.$set(e.insertInfo,"checkReserch",n.concat([o])):i>-1&&e.$set(e.insertInfo,"checkReserch",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(e.insertInfo,"checkReserch",a)}}}),e._v(" "),r("label",{staticClass:"custom-control-label",attrs:{for:n+1}},[e._v(e._s(t.reserch_name))])])})],2),e._v(" "),r("div",{staticClass:"form-group"},[r("vue-cropper",{ref:"cropper",attrs:{width:200,height:200}})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"text-success",attrs:{for:"description"}},[e._v("个人简介(可选项)")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.insertInfo.description,expression:"insertInfo.description"}],staticClass:"form-control mt-2",attrs:{id:"description",rows:"3"},domProps:{value:e.insertInfo.description},on:{input:function(t){t.target.composing||e.$set(e.insertInfo,"description",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"text-center text-danger mb-3"},[e._v("\n                      "+e._s(e.warnText)+"                       \n                  ")]),e._v(" "),r("div",{staticClass:"form-group text-center"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:e.insertUserInfo}},[e._v("完善")])])])])])])},staticRenderFns:[]};var a=r("Z0/y")(n,s,!1,function(e){r("apT3")},"data-v-5c397b2a",null);t.default=a.exports}});
//# sourceMappingURL=10.a40fa89062d83da1f8f2.js.map