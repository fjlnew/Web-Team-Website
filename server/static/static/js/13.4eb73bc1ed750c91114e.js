webpackJsonp([13],{"2SW7":function(t,e){},K31e:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("9rMa"),n={name:"login",data:function(){return{hideText:"",warnText:"",result:"",verify:"",checked:!1,loginInfo:{studentNum:"",password:""}}},computed:Object(i.b)(["loginText"]),watch:{loginText:function(){this.loginText.have?this.loginText.is_active?this.loginText.verify?(this.checked&&this.setCookie(this.compileStr(this.loginInfo.studentNum),this.compileStr(this.loginInfo.password),7),sessionStorage.setItem("studentNum",this.loginText.studentNum),this.$store.state.token=this.loginText.token,this.$router.replace("/self")):this.warnText="密码不正确！":this.warnText="该账号未被激活！":this.warnText="此账号不存在"}},mounted:function(){this._numRandom(),this.getCookie()},methods:{_numRandom:function(){var t=Math.floor(100*Math.random()),e=Math.floor(100*Math.random()),o=t+e;this.verify="",this.hideText=t+" + "+e+" = ?",this.result=o.toString()},_login:function(){""==this.loginInfo.studentNum||""==this.loginInfo.password?this.warnText="账号密码不能为空！":/^\d{12}$/.test(this.loginInfo.studentNum)?""==this.verify?this.warnText="验证码不能为空！":this.result!==this.verify?(this.warnText="傻蛋 你算错了！",this._numRandom()):(this.warnText="",this._numRandom(),this.$store.dispatch("login",this.loginInfo)):this.warnText="用户账号不符合规范！"},setCookie:function(t,e,o){var i=new Date;i.setTime(i.getTime()+864e5*o),window.document.cookie="userName="+t+";path=/;expires="+i.toGMTString(),window.document.cookie="userPwd="+e+";path=/;expires="+i.toGMTString()},getCookie:function(){if(document.cookie.length>0)for(var t=document.cookie.split("; "),e=0;e<t.length;e++){var o=t[e].split("=");"userName"==o[0]?this.loginInfo.studentNum=this.uncompileStr(o[1]):"userPwd"==o[0]&&(this.loginInfo.password=this.uncompileStr(o[1]),this.checked=!0)}},clearCookie:function(){this.setCookie("","",-1)},compileStr:function(t){for(var e=String.fromCharCode(t.charCodeAt(0)+t.length),o=1;o<t.length;o++)e+=String.fromCharCode(t.charCodeAt(o)+t.charCodeAt(o-1));return e},uncompileStr:function(t){t=unescape(t);for(var e=String.fromCharCode(t.charCodeAt(0)-t.length),o=1;o<t.length;o++)e+=String.fromCharCode(t.charCodeAt(o)-e.charCodeAt(o-1));return e}}},s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login form row my-5"},[o("div",{staticClass:"col-lg-3"}),t._v(" "),o("div",{staticClass:"col-lg-6"},[o("div",{staticClass:"form-group my-4"},[o("label",{staticClass:"mb-2 font-weight-bold text-info"},[t._v("学号")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginInfo.studentNum,expression:"loginInfo.studentNum"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"请输入学号"},domProps:{value:t.loginInfo.studentNum},on:{input:function(e){e.target.composing||t.$set(t.loginInfo,"studentNum",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group my-4"},[o("label",{staticClass:"mb-2 font-weight-bold text-info"},[t._v("密码")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginInfo.password,expression:"loginInfo.password"}],staticClass:"form-control form-control-lg",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.loginInfo.password},on:{input:function(e){e.target.composing||t.$set(t.loginInfo,"password",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group mt-5"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.verify,expression:"verify"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:t.hideText},domProps:{value:t.verify},on:{input:function(e){e.target.composing||(t.verify=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"custom-control custom-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"remeber"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:function(e){var o=t.checked,i=e.target,n=!!i.checked;if(Array.isArray(o)){var s=t._i(o,null);i.checked?s<0&&(t.checked=o.concat([null])):s>-1&&(t.checked=o.slice(0,s).concat(o.slice(s+1)))}else t.checked=n}}}),t._v(" "),o("label",{staticClass:"custom-control-label",attrs:{for:"remeber"}},[t._v("记住密码？")]),t._v(" "),o("router-link",{staticClass:"text-primary",attrs:{to:"/reset"}},[t._v("重置密码")])],1),t._v(" "),o("div",{staticClass:"text-center text-danger"},[t._v("\n            "+t._s(t.warnText)+"                       \n        ")]),t._v(" "),o("div",{staticClass:"form-group my-5"},[o("input",{staticClass:"form-control btn btn-lg btn-primary",attrs:{type:"submit",value:"登录"},on:{click:t._login}})])]),t._v(" "),o("div",{staticClass:"col-lg-3 "})])},staticRenderFns:[]};var r=o("Z0/y")(n,s,!1,function(t){o("2SW7")},"data-v-32441433",null);e.default=r.exports}});
//# sourceMappingURL=13.4eb73bc1ed750c91114e.js.map